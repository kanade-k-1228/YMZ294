# YMZ294

## トラブルシューティング

- 音が出ない！！！
  - 接続されているピン番号は合っていますか？
  - SO-GND 間に抵抗は繋いでいますか？
- チャンネルが少ない！！！
  - → [複数接続](#複数接続)

## 使い方

### Arduino ライブラリのインストール

1. ソースコードをダウンロード
   - [リポジトリのページ](https://github.com/kanade-k-1228/YMZ294/) 右上の Code から、zip を選択しダウンロード
2. ライブラリのインクルード
   - Arduino IDE の 「スケッチ」→「ライブラリをインクルード」→ 「.ZIP 形式のライブラリをインストール」から、
   - 先ほどダウンロードした「YMZ298.zip」を選択
   - プログラムの先頭に
   - `#include <YMZ294.h>`
   - と書くことで、ライブラリを使えるようになります！
3. テスト
   - このリポジトリの「sample/test.ino」の内容をスケッチにコピペして、
   - 「検証」を押してみて、エラーが起きなければ、無事にインストール完了です

### YMZ294 のしくみ

音が生成されるまでの流れを解説するよ！データシートの図を参照してね！

1. 楽音発生器
   - ある決まった周波数の矩形波（四角形の波）を生成します
   - 正弦波（音叉のようなきれいな音）ではない
   - 基準クロックを分周して生成している
2. ミキサー
   - 各チャンネルごとの ON/OFF を切り替えます
   - （リアルのミキサーと違って）音量はここでは調整しないことに注意
3. 音量調整
   - 各チャンネルごとの音量を調整します
   - 音量はデシベル値で設定します
     - デシベルは `dB = log10` 対数であることに注意

### YMZ294 のしくみ（詳細版）

「ノイズ」「エンベロープ」という機能を使うとより豊かな表現ができるよ！

1. 楽音発生器
2. ノイズ発生器
3. ミキサー
4. エンベロープ発生器
5. 音量調整

### ライブラリの使い方

「sample」の中にサンプルコードがあるのでいろいろ試してみて！

1. YMZ294 のピンがどこに繋がっているかを設定します
   - `YMZ294 sound()`
2. `setup` 関数の中で、ピンのセットアップと、YMZ294 のリセットをします
   - `sound.setup_pin()`
   - `sound.reset_registers()`
3. 音の設定をして再生します

## 高度な使い方

### 複数接続

YMZ294 には、「/CS」（チップセレクト）というピンがあり、これを使って複数の YMZ294 を並列に接続できます。
